import{E as z,o as n,e as s,f as o,d as M,B as D,x as B,h as e,N as x,X as F,t as c,Q as f,R as A,M as y,g as m,w as g,j as I,V as O,i as b,Y as H,Z as G,P as V,k as P,$ as Q}from"./index-8fhmIExO.js";import{C as E,a as X}from"./c-table-B-tRgew1.js";import{_ as U}from"./user-link-BsuP7Wli.js";import{_ as j}from"./cf-rating-color-OR_f9u_P.js";import{l as L}from"./load-Bav7-mWT.js";import{_ as Y,a as Z}from"./nc-rating-color-CGbruIr7.js";const tt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},et=o("path",{fill:"currentColor",d:"M17.65 6.35A7.96 7.96 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"},null,-1),nt=[et];function at(t,h){return n(),s("svg",tt,nt)}const st=z({name:"mdi-refresh",render:at}),rt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ot=o("path",{fill:"currentColor",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2L9.19 8.62L2 9.24l5.45 4.73L5.82 21z"},null,-1),lt=[ot];function ct(t,h){return n(),s("svg",rt,lt)}const it=z({name:"mdi-star",render:ct}),ut={class:"space-left"},dt={key:1},mt=M({__name:"TeamName",props:{author:null},setup(t){const h=t,{author:a}=D(h),r=B(()=>{var C;return((C=a==null?void 0:a.value)==null?void 0:C.teamUrl)??""}),u=()=>{r.value!==""&&window.open(r.value,"_blank")};return(C,v)=>e(x)(e(a).teamName)?(n(),s(f,{key:0},[o("div",null,[o("span",{class:F(e(r)!==""&&"cursor-pointer"),onClick:u},c(e(a).teamName),3)]),o("div",ut,[(n(!0),s(f,null,A(e(a).members,(_,R)=>(n(),y(U,{class:F(R>0&&"ml-2"),key:_,name:_},null,8,["class","name"]))),128))])],64)):(n(),s("span",dt,c(e(a).members[0]),1))}}),ht=JSON.parse('{"keyMaps":[],"stringMaps":[["tourist","a"],["Petr","b"],["Benq","c"],["ksun48","d"],["jiangly","e"]],"data":[{"n":"a","h":"a","r":3911},{"n":"b","h":"b","r":3296},{"n":"c","h":"c","r":3583},{"n":"d","h":"d","r":3334},{"n":"e","h":"e","r":3125}]}'),J=L(ht),ft=new Map(J.map(t=>[t.h,t.n])),_t=new Map(J.map(t=>[t.h,t.r]));function le(t){return ft.get(t)??t}function K(t){return _t.get(t)}const pt={class:"space-left"},gt=["href"],vt={class:"space-left"},yt=["href"],bt={key:2},$t=M({__name:"CfHandles",props:{author:null},setup(t){return(h,a)=>e(x)(t.author.teamName)&&t.author.members.length<=1?(n(),s(f,{key:0},[m(U,{name:t.author.teamName},null,8,["name"]),o("span",pt,[(n(!0),s(f,null,A(t.author.members,(r,u)=>(n(),s("a",{key:u,class:"ml-2",href:`https://codeforces.com/profile/${r}`,target:"_blank"},[m(e(j),{rating:e(K)(r)},{default:g(()=>[I(c(r),1)]),_:2},1032,["rating"])],8,gt))),128))])],64)):e(x)(t.author.teamName)?(n(),s(f,{key:1},[o("div",null,[m(U,{name:t.author.teamName},null,8,["name"])]),o("div",vt,[(n(!0),s(f,null,A(t.author.members,(r,u)=>(n(),s("a",{key:u,class:F(u>0&&"ml-2"),href:`https://codeforces.com/profile/${r}`,target:"_blank"},[m(e(j),{rating:e(K)(r)},{default:g(()=>[I(c(r),1)]),_:2},1032,["rating"])],10,yt))),128))])],64)):(n(),s("span",bt,c(t.author.members[0]),1))}}),kt=JSON.parse('{"keyMaps":[],"stringMaps":[["tourist","a"],["jiangly","b"]],"data":[{"n":"a","h":"a","r":3969},{"n":"b","h":"b","r":3343}]}'),W=L(kt);new Map(W.map(t=>[t.h,t.n]));const xt=new Map(W.map(t=>[t.h,t.r]));function Ct(t){return xt.get(t)}const Nt={class:"space-left"},Bt=["href"],Ft={key:1},Mt=M({__name:"AtHandles",props:{author:null},setup(t){return(h,a)=>e(x)(t.author.teamName)?(n(),s(f,{key:0},[m(U,{name:t.author.teamName},null,8,["name"]),o("span",Nt,[(n(!0),s(f,null,A(t.author.members,(r,u)=>(n(),s("a",{key:u,class:"ml-2 font-bold",href:`https://atcoder.jp/users/${r}`,target:"_blank"},[m(e(Y),{rating:e(Ct)(r)},{default:g(()=>[I(c(r),1)]),_:2},1032,["rating"])],8,Bt))),128))])],64)):(n(),s("span",Ft,c(t.author.members[0]),1))}}),Tt=JSON.parse('{"keyMaps":[],"stringMaps":[],"data":[]}'),q=L(Tt);new Map(q.map(t=>[t.hn,t.n]));const At=new Map(q.map(t=>[t.hn,t.r]));function Rt(t){return At.get(t)}const Et=["href"],Ot={class:"space-left"},Ut=["href"],wt={key:1},Ht=M({__name:"NcHandles",props:{author:null},setup(t){return(h,a)=>e(x)(t.author.teamName)?(n(),s(f,{key:0},[o("div",null,[o("a",{href:t.author.teamUrl},[m(e(Z),{rating:e(Rt)(t.author.teamName)},{default:g(()=>[I(c(t.author.teamName),1)]),_:1},8,["rating"])],8,Et)]),o("div",Ot,[(n(!0),s(f,null,A(t.author.members,(r,u)=>(n(),s("span",{key:r,class:F(u>0&&"ml-2")},[/^\d+$/.test(r)?(n(),s("a",{key:0,href:`https://ac.nowcoder.com/acm/contest/profile/${r}`},c(r),9,Ut)):(n(),y(U,{key:1,name:r},null,8,["name"]))],2))),128))])],64)):(n(),s("span",wt,c(t.author.members[0]),1))}}),It=o("span",null,"+",-1),St={key:0},Dt={key:0,class:"text-sm text-gray-400"},Lt={key:1},Vt={class:"text-center font-bold text-red-500"},Pt=o("span",null,"-",-1),jt=M({__name:"StandingResult",props:{result:null,practice:{type:Boolean}},setup(t){const h=t,{result:a}=D(h),r=B(()=>{var v;return((v=a==null?void 0:a.value)==null?void 0:v.submissionUrl)??""}),u=()=>{r.value!==""&&window.open(r.value,"_blank")};function C(v){function _(T){return(T<10?"0":"")+T}const R=Math.floor(v/3600),S=Math.floor(v%3600/60);return`${R}:${_(S)}`}return(v,_)=>e(a)?(n(),s(f,{key:0},[e(a).verdict===e(O).OK?(n(),s("div",{key:0,class:F(e(r)!==""&&"cursor-pointer"),onClick:u},[o("div",{class:F(["text-center","font-bold",t.practice?"text-blue-500":"text-green-500"])},[It,e(a).dirty?(n(),s("span",St,c(e(a).dirty),1)):b("v-if",!0)],2),t.practice?b("v-if",!0):(n(),s("div",Dt,[o("span",null,c(C(e(a).relativeTime)),1)]))],2)):e(a).dirty?(n(),s("div",Lt,[o("div",Vt,[Pt,o("span",null,c(e(a).dirty),1)])])):b("v-if",!0)],64)):b("v-if",!0)}}),Kt={key:0,class:"mt-4 box"},zt={key:0,class:"font-600"},Jt={key:1,class:"font-600"},Wt={class:"flex items-center"},qt={key:0},Gt=M({__name:"ContestStandings",props:{contest:null},setup(t){const h=t,{contest:a}=D(h),r=B(()=>a.value.type.startsWith("codeforces")),u=B(()=>a.value.type.startsWith("atcoder")),C=B(()=>a.value.type.startsWith("nowcoder")),v=i=>i.author.participantType===V.OUT_OF_COMPETITION,_=i=>i.author.participantType===V.PRACTICE,R=i=>typeof i=="string"?i:String.fromCharCode(65+i),S=B(()=>{var i;return((i=a.value.problems)==null?void 0:i.sort((N,l)=>{const $=typeof N.index=="string"?N.index.charCodeAt(0)-65:N.index,d=typeof l.index=="string"?l.index.charCodeAt(0)-65:l.index;return $-d}))??[]}),T=B(()=>{var N,l;if(H(a.value.problems))return{standings:[],firstBlood:[]};if(H(a.value.standings))return{standings:[],firstBlood:[]};const i=Array((N=a.value.problems)==null?void 0:N.length);for(const $ of a.value.standings){const d=Array((l=a.value.problems)==null?void 0:l.length);for(const p of $.submissions){const k=p.problemIndex;if(p.verdict===O.OK&&!_($)&&(H(i[k])||i[k].relativeTime>p.relativeTime)&&(i[k]=p),H(d[k]))d[k]=p;else{const w=d[k];((w==null?void 0:w.verdict)??O.FAILED)!==O.OK&&(d[k]=p)}}Reflect.set($,"result",d)}return{standings:a.value.standings,firstBlood:i}});return(i,N)=>e(a).standings?(n(),s("div",Kt,[m(e(X),{data:e(T).standings,mobile:1023},{columns:g(({row:l})=>[m(e(E),{label:"#",align:"center",width:"4em"},{default:g(()=>[_(l)?(n(),s("span",Jt,"-")):(n(),s("span",zt,c(l.rank),1))]),_:2},1024),m(e(E),{label:e(r)?"Handle":""},{default:g(()=>[o("div",Wt,[v(l)?(n(),y(e(it),{key:0,class:"mr-1 text-sm text-yellow-300 inline-block"})):b("v-if",!0),o("div",null,[e(r)?(n(),y($t,{key:0,author:l.author},null,8,["author"])):e(u)?(n(),y(Mt,{key:1,author:l.author},null,8,["author"])):e(C)?(n(),y(Ht,{key:2,author:l.author},null,8,["author"])):(n(),y(mt,{key:3,author:l.author},null,8,["author"]))])])]),_:2},1032,["label"]),m(e(E),{label:"解决",align:"center",width:"4em"},{default:g(()=>[o("span",null,c(l.solved),1)]),_:2},1024),m(e(E),{label:"罚时",align:"center",width:"4em"},{default:g(()=>[_(l)?b("v-if",!0):(n(),s("span",qt,c(e(G)(l.penalty).value),1))]),_:2},1024),(n(!0),s(f,null,A(e(S),($,d)=>{var p;return n(),y(e(E),{key:$.index,label:R($.index),center:"",class:F(e(x)(l)&&e(x)(e(T).firstBlood[d])&&e(x)(l.result[d])&&l.result[d].verdict===e(O).OK&&l.result[d].relativeTime<=(((p=e(T).firstBlood[d])==null?void 0:p.relativeTime)??Number.MIN_SAFE_INTEGER)&&"bg-[#E0FFE4]")},{default:g(()=>[m(jt,{result:l.result[d],practice:_(l)},null,8,["result","practice"])]),_:2},1032,["label","class"])}),128))]),_:1},8,["data"])])):b("v-if",!0)}}),Qt={class:"mb-4 flex items-center"},Xt={class:"info-box border-left"},Yt={key:0},Zt=["href"],te=["href"],ce=M({__name:"Contest",props:{contest:null,dynamic:{type:Boolean}},emits:["refresh"],setup(t,{emit:h}){return(a,r)=>(n(),s("div",null,[o("h2",Qt,[o("span",null,c(t.contest.name),1),t.dynamic?(n(),y(e(st),{key:0,class:"ml-4 h-8 w-8 p-1 border rounded-full cursor-pointer hover:bg-light-700",onClick:r[0]||(r[0]=u=>h("refresh"))})):b("v-if",!0)]),o("div",Xt,[o("p",null," 时间："+c(e(P)(t.contest.startTime).value)+" 至 "+c(e(P)(t.contest.startTime+t.contest.duration).value),1),o("p",null,"时长："+c(e(Q)(t.contest.duration).value),1),o("p",null,"人数："+c(t.contest.participantNumber)+" 人",1),t.contest.contestUrl||t.contest.standingsUrl?(n(),s("p",Yt,[o("a",{href:t.contest.contestUrl,target:"_blank"},"比赛主页",8,Zt),o("a",{href:t.contest.standingsUrl,target:"_blank",class:"ml-2"},"完整榜单",8,te)])):b("v-if",!0)]),m(Gt,{contest:t.contest},null,8,["contest"])]))}});export{ce as _,le as f,J as h};
