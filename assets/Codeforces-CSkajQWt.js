import{d as X,s as Y,v as Z,b as w,x as tt,o as _,e as q,g as o,w as a,h as t,f as h,t as l,M as b,j as u,i as H,k as M,N as B,y as g,z as et,A as st}from"./index-CjUs8Jv5.js";import{u as nt}from"./users-BpOsUf0P.js";import{C as c,a as at}from"./c-table-D-f6IUEe.js";import{_ as ot}from"./user-link-CK26Fvto.js";import{_ as D}from"./cf-rating-color-D3zxGY7g.js";import"./load-Bav7-mWT.js";const rt={class:"divide-y"},lt=h("h2",{class:"mb-4"},"Codeforces",-1),ct={class:"font-600"},ut=["href"],it={key:0},dt=h("div",{class:"my-4 px-3"},"人捏？",-1),ft={class:"mt-4 pt-4"},gt={class:"text-gray-400"},bt=X({__name:"Codeforces",setup(ht){const S=Y(),j=String(S.query.sort??"最近通过"),z=String(S.query.order??"desc"),m=Z(w),C=e=>e.startsWith("codeforces"),L=e=>{const d=e.submissions.filter(({type:s})=>C(s)),p=d.length,n=d.filter(({v:s})=>s===1).length,G=d.filter(({t:s})=>s>=m.value).length,I=d.filter(({t:s,v:r})=>s>=m.value&&r===1).length,J=e.contests.filter(({type:s,t:r})=>r>=m.value&&C(s)).length,y=d.filter(({t:s,v:r,d:f})=>s>=m.value&&r===1&&B(f)),O=y.reduce((s,r)=>s+(r.d??0),0),K=Math.ceil(y.length>0?O/y.length:0),N=d.filter(({v:s})=>s===1).sort((s,r)=>r.t-s.t),P=N.length>0?N[0].t:0,v=e.handles.filter(s=>C(s.type));let V=v.length>0?v[0].handle:"",$=!1;const Q=v.reduce((s,r)=>{const f=r;return B(f.codeforces)&&($=!0),B(f.codeforces)&&f.codeforces.rating>s?(V=f.handle,f.codeforces.rating):s},0);return{subCount:p,okCount:n,recentSubCount:G,recentOkCount:I,recentContest:J,recentDiffcult:O,recentAvgDiffcult:K,lastSolveTime:P,rating:Q,isRated:$,handle:V,...e}},U=tt(()=>nt.map(L)),k=g(e=>e.rating),F=g(e=>e.recentOkCount),A=g(e=>e.recentContest),T=g(e=>e.lastSolveTime),x=g(e=>e.recentAvgDiffcult),R=g(e=>e.okCount),E=g(e=>e.contests.length),W=st(e=>e.name);function i(e){return et(e,k,F,A,T,x,R,E,W)}return(e,d)=>(_(),q("div",rt,[lt,o(t(at),{data:t(U),cache:"codeforces","default-sort":t(j),"default-sort-order":t(z)},{columns:a(({index:p,row:n})=>[o(t(c),{label:"#",width:"3em",align:"center"},{default:a(()=>[h("span",ct,l(p+1),1)]),_:2},1024),o(t(c),{label:"姓名"},{default:a(()=>[o(ot,{name:n.name},null,8,["name"])]),_:2},1024),o(t(c),{label:"Handle"},{default:a(()=>[h("a",{href:`https://codeforces.com/profile/${n.handle}`,target:"_blank"},[n.isRated?(_(),b(t(D),{key:0,rating:n.rating},{default:a(()=>[u(l(n.handle),1)]),_:2},1032,["rating"])):(_(),b(t(D),{key:1},{default:a(()=>[u(l(n.handle),1)]),_:2},1024))],8,ut)]),_:2},1024),o(t(c),{label:"Rating",sort:i(t(k)),align:"right"},{default:a(()=>[n.isRated?(_(),b(t(D),{key:0,rating:n.rating,"disable-legendary":""},{default:a(()=>[u(l(n.rating),1)]),_:2},1032,["rating"])):H("v-if",!0)]),_:2},1032,["sort"]),o(t(c),{label:"最近通过",width:"7em",align:"right",sort:i(t(F))},{default:a(()=>[u(l(n.recentOkCount),1)]),_:2},1032,["sort"]),o(t(c),{label:"最近平均难度",width:"10em",align:"right",sort:i(t(x))},{default:a(()=>[u(l(n.recentAvgDiffcult),1)]),_:2},1032,["sort"]),o(t(c),{label:"最近比赛",width:"7em",align:"right",sort:i(t(A))},{default:a(()=>[u(l(n.recentContest),1)]),_:2},1032,["sort"]),o(t(c),{label:"最新通过",width:"10em",align:"center",sort:i(t(T))},{default:a(()=>[n.lastSolveTime>0?(_(),q("span",it,l(t(M)(n.lastSolveTime).value),1)):H("v-if",!0)]),_:2},1032,["sort"]),o(t(c),{label:"通过",width:"5em",align:"right",sort:i(t(R))},{default:a(()=>[u(l(n.okCount),1)]),_:2},1032,["sort"]),o(t(c),{label:"比赛",width:"5em",align:"right",sort:i(t(E))},{default:a(()=>[u(l(n.contests.length),1)]),_:2},1032,["sort"])]),empty:a(()=>[dt]),_:1},8,["data","default-sort","default-sort-order"]),h("div",ft,[h("span",gt,"最近开始于 "+l(t(M)(m.value).value),1)])]))}});export{bt as default};
