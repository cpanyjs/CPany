import{o as u,e as b,f as C,v as F,h as e,x as y,y as ke,d as q,z as G,A as i,c as A,g as M,w as x,k as W,B as R,F as $,C as H,j as B,l as O,_ as xe,s as Pe,D as Me,E as D}from"./index.c6ae5b7b.js";const Se={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$e=C("path",{fill:"currentColor",d:"M11 4h2v12l5.5-5.5l1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5L11 16V4Z"},null,-1),Le=[$e];function je(t,n){return u(),b("svg",Se,Le)}var Be={name:"mdi-arrow-down",render:je};const Ae={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ne=C("path",{fill:"currentColor",d:"M13 20h-2V8l-5.5 5.5l-1.42-1.42L12 4.16l7.92 7.92l-1.42 1.42L13 8v12Z"},null,-1),ze=[Ne];function Ve(t,n){return u(),b("svg",Ae,ze)}var De={name:"mdi-arrow-up",render:Ve};function Re(t){const n=F(window.innerWidth),v=F(n.value<=e(t)),g=()=>{n.value=window.innerWidth,v.value=n.value<=e(t)},s=()=>window.removeEventListener("resize",g);return window.addEventListener("resize",g,{passive:!0}),{width:n,isMobile:v,clean:s}}const ve=new Map;function Te(t,n,v){var I;const g=y(()=>e(n).length),s=y(()=>{var L;return Math.max(1,(L=e(t))!=null?L:g.value)}),c=y(()=>Math.ceil(g.value/s.value)),r=F(v&&(I=ve.get(v))!=null?I:0),p=y(()=>r.value*s.value),_=y(()=>Math.min(g.value,p.value+s.value));ke(r,L=>{v&&ve.set(v,L)});const h=y(()=>r.value+1<c.value&&_.value<g.value),w=()=>{h.value&&(r.value+=1)},d=y(()=>r.value>0&&p.value>0);return{current:r,pageLength:c,L:p,R:_,hasNextPage:h,nextPage:w,hasPrePage:d,prePage:()=>{d.value&&(r.value-=1)},goPage:L=>{const z=e(L);0<=z&&z<c.value&&(r.value=z)}}}var Ee=q({name:"CTableColumn",props:{label:String,width:{type:[Number,String]},align:String,center:{type:Boolean,default:!1},sort:Function,mobileHeaderClass:{type:Array,default:[]}},setup(t,{slots:n}){const{align:v,center:g}=G(t),s=["px-3","py-2",v.value==="center"||g.value?"text-center":v.value==="right"?"text-right":"text-left"];return()=>i("td",{class:s},n.default&&n.default(t))}});const Fe={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ie=C("path",{fill:"currentColor",d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42Z"},null,-1),He=[Ie];function Oe(t,n){return u(),b("svg",Fe,He)}var pe={name:"mdi-chevron-left",render:Oe};const Ye={preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ze=C("path",{fill:"currentColor",d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6l-1.41-1.42Z"},null,-1),Ue=[Ze];function We(t,n){return u(),b("svg",Ye,Ue)}var fe={name:"mdi-chevron-right",render:We};const qe={key:0,class:"mb-2 grid grid-cols-2 gap-2"},Ge={class:"flex justify-center"},Je=C("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Ke=C("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Qe=C("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Xe=C("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),et=q({__name:"c-table-page",props:{isMobile:{type:Boolean},pageView:null,current:null,first:null,last:null,pageSize:null,nextPage:null,prePage:null,goPage:null},setup(t){const n=t,{isMobile:v,pageView:g,current:s,first:c,last:r}=G(n),p=y(()=>{var h;return(h=g==null?void 0:g.value)!=null?h:5}),_=y(()=>{var h;return(h=v==null?void 0:v.value)!=null?h:!1});return(h,w)=>{const d=A("c-button");return u(),b($,null,[e(_)?(u(),b("div",qe,[M(d,{padding:"p-2",onClick:t.prePage,disable:e(s)<=e(c)},{default:x(()=>[M(e(pe))]),_:1},8,["onClick","disable"]),M(d,{padding:"p-2",onClick:t.nextPage,disable:e(s)+1>=e(r)},{default:x(()=>[M(e(fe))]),_:1},8,["onClick","disable"])])):W("v-if",!0),C("div",Ge,[e(_)?W("v-if",!0):(u(),R(d,{key:0,padding:"p-2",onClick:t.prePage,disable:e(s)<=e(c)},{default:x(()=>[M(e(pe))]),_:1},8,["onClick","disable"])),e(r)-e(c)<=e(p)?(u(!0),b($,{key:1},H(e(r)-e(c),l=>(u(),R(d,{key:l,class:"ml-2",info:l+e(c)===e(s)+1,onClick:N=>t.goPage(l+e(c)-1)},{default:x(()=>[C("span",null,B(l+e(c)),1)]),_:2},1032,["info","onClick"]))),128)):e(s)-e(c)<e(p)?(u(),b($,{key:2},[(u(!0),b($,null,H(e(p),l=>(u(),R(d,{key:l,class:"ml-2",info:l+e(c)===e(s)+1,onClick:N=>t.goPage(l+e(c)-1)},{default:x(()=>[C("span",null,B(l+e(c)),1)]),_:2},1032,["info","onClick"]))),128)),Je,M(d,{class:"ml-2",onClick:w[0]||(w[0]=l=>t.goPage(e(r)-1))},{default:x(()=>[O(B(e(r)),1)]),_:1})],64)):e(r)-e(s)<=e(p)?(u(),b($,{key:3},[M(d,{class:"ml-2",onClick:w[1]||(w[1]=l=>t.goPage(e(c)))},{default:x(()=>[O(B(e(c)+1),1)]),_:1}),Ke,(u(!0),b($,null,H(e(p),l=>(u(),R(d,{key:l,class:"ml-2",info:e(r)-e(p)+l===e(s)+1,onClick:N=>t.goPage(e(r)-e(p)+l-1)},{default:x(()=>[C("span",null,B(e(r)-e(p)+l),1)]),_:2},1032,["info","onClick"]))),128))],64)):(u(),b($,{key:4},[M(d,{class:"ml-2",onClick:w[2]||(w[2]=l=>t.goPage(e(c)))},{default:x(()=>[O(B(e(c)+1),1)]),_:1}),Qe,(u(!0),b($,null,H(e(p),l=>(u(),R(d,{key:l,class:"ml-2",info:e(s)-Math.floor(e(p)/2)+l===e(s)+1,onClick:N=>t.goPage(e(s)-Math.floor(e(p)/2)+l-1)},{default:x(()=>[C("span",null,B(e(s)-Math.floor(e(p)/2)+l),1)]),_:2},1032,["info","onClick"]))),128)),Xe,M(d,{class:"ml-2",onClick:w[3]||(w[3]=l=>t.goPage(e(r)-1))},{default:x(()=>[O(B(e(r)),1)]),_:1})],64)),e(_)?W("v-if",!0):(u(),R(d,{key:5,padding:"p-2",class:"ml-2",onClick:t.nextPage,disable:e(s)+1>=e(r)},{default:x(()=>[M(e(fe))]),_:1},8,["onClick","disable"]))])],64)}}}),tt={},lt={class:"select relative"},nt={class:"pl-2 pr-8 py-2 cursor-pointer block w-full outline-none rounded border border-1 border-[#dbdbdb] appearance-none"};function at(t,n){return u(),b("div",lt,[C("select",nt,[Pe(t.$slots,"default")])])}var st=xe(tt,[["render",at]]);const ge=new Map;var ot=q({name:"CTable",components:{IconDown:Be,IconUp:De,CTablePage:et,CSelect:st},props:{cache:{type:String},data:{type:Array,default:[]},mobile:{type:Number,default:768},defaultSort:{type:String},defaultSortOrder:{type:String,default:"asc"},pageSize:{type:Number},mobilePageSize:{type:Number}},setup(t,{slots:n}){var ee,te;const{data:v,defaultSort:g,defaultSortOrder:s,mobile:c,pageSize:r,mobilePageSize:p}=G(t),_=y(()=>v.value.length===0),{isMobile:h,clean:w}=Re(c);Me(()=>w());const d=y(()=>{var k;return h.value&&(k=p.value)!=null?k:r.value}),l=t.cache?ge.get(t.cache):void 0,N=y(()=>D(d.value)),{current:I,pageLength:L,L:z,R:me,nextPage:he,prePage:be,goPage:ye}=Te(d,v,t.cache),T=F((ee=l==null?void 0:l.field)!=null?ee:g.value),j=F((te=l==null?void 0:l.order)!=null?te:s.value),Y=()=>{t.cache&&ge.set(t.cache,{field:T.value,order:j.value})};Y();const J=k=>{T.value=k,j.value=s.value,Y()},K=()=>{j.value==="desc"?j.value="asc":j.value="desc",Y()},Z=k=>{if(!k)return[];const P=[];for(const a of k)if(a.type===$&&Array.isArray(a.children))for(const o of a.children)o!==null&&typeof o=="object"&&!Array.isArray(o)&&P.push(o);else P.push(a);return P.filter(a=>a.type===Ee)},U=Z(n.columns?n.columns({}):[]),Ce=y(()=>(P=>{var a,o,f;if(D(T.value)){for(const m of U)if(((o=(a=m.props)==null?void 0:a.label)!=null?o:"")===T.value){const S=P.sort((f=m.props)==null?void 0:f.sort);return j.value==="desc"?S.reverse():S}return P}else return P})(v.value)),Q=y(()=>Ce.value.slice(z.value,me.value)),X=()=>i(A("c-table-page"),{current:I.value,first:0,last:L.value,pageSize:d.value,nextPage:he,prePage:be,goPage:ye,pageView:h.value?3:5,isMobile:h.value}),_e=()=>{const k=()=>U.map(a=>{var E,le,ne,ae,se,re,oe,ie,ce;const o=D((E=a.props)==null?void 0:E.sort),f=o&&((ne=(le=a.props)==null?void 0:le.label)!=null?ne:"")===T.value,m={width:(ae=a.props)==null?void 0:ae.width,borderWidth:"0 0 2px 0"},V=((se=a.props)==null?void 0:se.align)==="center"||D((re=a.props)==null?void 0:re.center)&&((oe=a.props)==null?void 0:oe.center)!==!1?"justify-center":((ie=a.props)==null?void 0:ie.align)==="right"?"justify-end":"justify-start";return i("th",{style:m,class:["select-none","font-600","px-3","py-2","border-solid",f?"border-[#7a7a7a]":"border-[#dbdbdb]",o?"cursor-pointer":null,o?"hover:border-[#7a7a7a]":null]},i("div",{class:["flex","items-center",V],onClick:o?()=>{var ue,de;f?K():J((de=(ue=a.props)==null?void 0:ue.label)!=null?de:"")}:void 0},[o?i(j.value==="desc"?A("icon-down"):A("icon-up"),{class:[!f&&"hidden"]}):"",i("span",{},(ce=a.props)==null?void 0:ce.label)]))}),P=a=>a.map((o,f)=>i("tr",{},n.columns&&Z(n.columns({row:o,index:f+z.value}))));return i("div",{},[i("table",{class:["table","w-full","border-separate","table-auto","rounded"]},[i("thead",{},i("tr",{},k())),i("tbody",{},P(Q.value))]),!_.value&&N.value&&X(),_.value&&n.empty&&n.empty({})])},we=()=>{const k=()=>{const a=U.map(o=>{var f,m,V;if(D((f=o.props)==null?void 0:f.sort)){const S=(V=(m=o.props)==null?void 0:m.label)!=null?V:"";return i("option",{value:S},[S])}else return null}).filter(o=>D(o));return a.length>0&&i("div",{class:["my-4","flex","justify-between"]},[i(A("c-select"),{class:["w-full","mr-2"],onChange(o){var m;const f=(m=o.target)==null?void 0:m.value;D(f)&&J(f)}},a),i(A("c-button"),{info:!0,onClick:K},[j.value==="desc"?i(A("icon-down"),{}):i(A("icon-up"),{})])])},P=()=>Q.value.map((a,o)=>{const f=Z(n.columns&&n.columns({row:a,index:o+z.value,mobile:!0}));return i("div",{class:["box","p-0","my-4"]},f.map(m=>{var S,E;const V=(S=m.props&&m.props["mobile-header-class"])!=null?S:[];return i("div",{class:["pl-3","border","flex","flex-shrink","justify-between","justify-items-stretch"]},[i("div",{class:["py-2","font-600","text-left","flex","items-center",...V]},(E=m.props)==null?void 0:E.label),i(m,{class:["block"]})])}))});return i("div",{class:["mobile-table"]},[!_.value&&k(),P(),!_.value&&N.value&&X(),_.value&&n.empty&&n.empty({})])};return()=>h.value?we():_e()}});export{ot as C,Ee as a,st as b};
