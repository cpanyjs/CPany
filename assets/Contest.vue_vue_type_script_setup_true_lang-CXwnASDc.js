import{E as J,o as t,e as r,f as l,d as B,B as V,x as T,h as e,N as C,X as R,t as c,Q as f,R as U,M as y,g as h,w as g,j as L,V as H,i as b,Y as S,Z as Q,P,k as j,$ as X}from"./index-Cc-lLLcQ.js";import{C as A,a as Y}from"./c-table-B5Gf5T_P.js";import{_ as E}from"./user-link.vue_vue_type_script_setup_true_lang-D-ZGsYJ_.js";import{_ as K}from"./cf-rating-color.vue_vue_type_script_setup_true_lang-DRbCCW_c.js";import{l as F}from"./load-Bav7-mWT.js";import{_ as Z,a as x}from"./nc-rating-color.vue_vue_type_script_setup_true_lang-W3OTeqpb.js";const ee={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},te=l("path",{fill:"currentColor",d:"M17.65 6.35A7.96 7.96 0 0 0 12 4a8 8 0 0 0-8 8a8 8 0 0 0 8 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0 1 12 18a6 6 0 0 1-6-6a6 6 0 0 1 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"},null,-1),se=[te];function ne(n,o){return t(),r("svg",ee,se)}const ae=J({name:"mdi-refresh",render:ne}),re={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},oe=l("path",{fill:"currentColor",d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.62L12 2L9.19 8.62L2 9.24l5.45 4.73L5.82 21z"},null,-1),le=[oe];function ie(n,o){return t(),r("svg",re,le)}const ce=J({name:"mdi-star",render:ie}),ue={class:"space-left"},me={key:1},de=B({__name:"TeamName",props:{author:{}},setup(n){const o=n,{author:a}=V(o),s=T(()=>{var $;return(($=a==null?void 0:a.value)==null?void 0:$.teamUrl)??""}),u=()=>{s.value!==""&&window.open(s.value,"_blank")};return($,_)=>e(C)(e(a).teamName)?(t(),r(f,{key:0},[l("div",null,[l("span",{class:R(s.value!==""&&"cursor-pointer"),onClick:u},c(e(a).teamName),3)]),l("div",ue,[(t(!0),r(f,null,U(e(a).members,(d,w)=>(t(),y(E,{class:R(w>0&&"ml-2"),key:d,name:d},null,8,["class","name"]))),128))])],64)):(t(),r("span",me,c(e(a).members[0]),1))}}),pe=JSON.parse('{"keyMaps":[],"stringMaps":[["tourist","a"],["Petr","b"],["Benq","c"],["ksun48","d"],["jiangly","e"]],"data":[{"n":"a","h":"a","r":3911},{"n":"b","h":"b","r":3296},{"n":"c","h":"c","r":3583},{"n":"d","h":"d","r":3334},{"n":"e","h":"e","r":3125}]}'),W=F(pe),he=new Map(W.map(n=>[n.h,n.n])),fe=new Map(W.map(n=>[n.h,n.r]));function rt(n){return he.get(n)??n}function z(n){return fe.get(n)}const _e={class:"space-left"},ve=["href"],ge={class:"space-left"},ye=["href"],be={key:2},$e=B({__name:"CfHandles",props:{author:{}},setup(n){return(o,a)=>e(C)(o.author.teamName)&&o.author.members.length<=1?(t(),r(f,{key:0},[h(E,{name:o.author.teamName},null,8,["name"]),l("span",_e,[(t(!0),r(f,null,U(o.author.members,(s,u)=>(t(),r("a",{key:u,class:"ml-2",href:`https://codeforces.com/profile/${s}`,target:"_blank"},[h(e(K),{rating:e(z)(s)},{default:g(()=>[L(c(s),1)]),_:2},1032,["rating"])],8,ve))),128))])],64)):e(C)(o.author.teamName)?(t(),r(f,{key:1},[l("div",null,[h(E,{name:o.author.teamName},null,8,["name"])]),l("div",ge,[(t(!0),r(f,null,U(o.author.members,(s,u)=>(t(),r("a",{key:u,class:R(u>0&&"ml-2"),href:`https://codeforces.com/profile/${s}`,target:"_blank"},[h(e(K),{rating:e(z)(s)},{default:g(()=>[L(c(s),1)]),_:2},1032,["rating"])],10,ye))),128))])],64)):(t(),r("span",be,c(o.author.members[0]),1))}}),ke=JSON.parse('{"keyMaps":[],"stringMaps":[["tourist","a"],["jiangly","b"]],"data":[{"n":"a","h":"a","r":3969},{"n":"b","h":"b","r":3343}]}'),q=F(ke);new Map(q.map(n=>[n.h,n.n]));const Ne=new Map(q.map(n=>[n.h,n.r]));function Ce(n){return Ne.get(n)}const Me={class:"space-left"},Te=["href"],Re={key:1},Be=B({__name:"AtHandles",props:{author:{}},setup(n){return(o,a)=>e(C)(o.author.teamName)?(t(),r(f,{key:0},[h(E,{name:o.author.teamName},null,8,["name"]),l("span",Me,[(t(!0),r(f,null,U(o.author.members,(s,u)=>(t(),r("a",{key:u,class:"ml-2 font-bold",href:`https://atcoder.jp/users/${s}`,target:"_blank"},[h(e(Z),{rating:e(Ce)(s)},{default:g(()=>[L(c(s),1)]),_:2},1032,["rating"])],8,Te))),128))])],64)):(t(),r("span",Re,c(o.author.members[0]),1))}}),Oe=JSON.parse('{"keyMaps":[],"stringMaps":[],"data":[]}'),G=F(Oe);new Map(G.map(n=>[n.hn,n.n]));const Ue=new Map(G.map(n=>[n.hn,n.r]));function we(n){return Ue.get(n)}const Ae=["href"],He={class:"space-left"},Ee=["href"],Ie={key:1},Se=B({__name:"NcHandles",props:{author:{}},setup(n){return(o,a)=>e(C)(o.author.teamName)?(t(),r(f,{key:0},[l("div",null,[l("a",{href:o.author.teamUrl},[h(e(x),{rating:e(we)(o.author.teamName)},{default:g(()=>[L(c(o.author.teamName),1)]),_:1},8,["rating"])],8,Ae)]),l("div",He,[(t(!0),r(f,null,U(o.author.members,(s,u)=>(t(),r("span",{key:s,class:R(u>0&&"ml-2")},[/^\d+$/.test(s)?(t(),r("a",{key:0,href:`https://ac.nowcoder.com/acm/contest/profile/${s}`},c(s),9,Ee)):(t(),y(E,{key:1,name:s},null,8,["name"]))],2))),128))])],64)):(t(),r("span",Ie,c(o.author.members[0]),1))}}),Le={key:0},De={key:0,class:"text-sm text-gray-400"},Ve={key:1},Fe={class:"text-center font-bold text-red-500"},Pe=B({__name:"StandingResult",props:{result:{},practice:{type:Boolean}},setup(n){const o=n,{result:a}=V(o),s=T(()=>{var _;return((_=a==null?void 0:a.value)==null?void 0:_.submissionUrl)??""}),u=()=>{s.value!==""&&window.open(s.value,"_blank")};function $(_){function d(O){return(O<10?"0":"")+O}const w=Math.floor(_/3600),D=Math.floor(_%3600/60);return`${w}:${d(D)}`}return(_,d)=>e(a)?(t(),r(f,{key:0},[e(a).verdict===e(H).OK?(t(),r("div",{key:0,class:R(s.value!==""&&"cursor-pointer"),onClick:u},[l("div",{class:R(["text-center","font-bold",_.practice?"text-blue-500":"text-green-500"])},[d[0]||(d[0]=l("span",null,"+",-1)),e(a).dirty?(t(),r("span",Le,c(e(a).dirty),1)):b("v-if",!0)],2),_.practice?b("v-if",!0):(t(),r("div",De,[l("span",null,c($(e(a).relativeTime)),1)]))],2)):e(a).dirty?(t(),r("div",Ve,[l("div",Fe,[d[1]||(d[1]=l("span",null,"-",-1)),l("span",null,c(e(a).dirty),1)])])):b("v-if",!0)],64)):b("v-if",!0)}}),je={key:0,class:"mt-4 box"},Ke={key:0,class:"font-600"},ze={key:1,class:"font-600"},Je={class:"flex items-center"},We={key:0},qe=B({__name:"ContestStandings",props:{contest:{}},setup(n){const o=n,{contest:a}=V(o),s=T(()=>a.value.type.startsWith("codeforces")),u=T(()=>a.value.type.startsWith("atcoder")),$=T(()=>a.value.type.startsWith("nowcoder")),_=m=>m.author.participantType===P.OUT_OF_COMPETITION,d=m=>m.author.participantType===P.PRACTICE,w=m=>typeof m=="string"?m:String.fromCharCode(65+m),D=T(()=>{var m;return((m=a.value.problems)==null?void 0:m.sort((M,i)=>{const k=typeof M.index=="string"?M.index.charCodeAt(0)-65:M.index,p=typeof i.index=="string"?i.index.charCodeAt(0)-65:i.index;return k-p}))??[]}),O=T(()=>{var M,i;if(S(a.value.problems))return{standings:[],firstBlood:[]};if(S(a.value.standings))return{standings:[],firstBlood:[]};const m=Array((M=a.value.problems)==null?void 0:M.length);for(const k of a.value.standings){const p=Array((i=a.value.problems)==null?void 0:i.length);for(const v of k.submissions){const N=v.problemIndex;if(v.verdict===H.OK&&!d(k)&&(S(m[N])||m[N].relativeTime>v.relativeTime)&&(m[N]=v),S(p[N]))p[N]=v;else{const I=p[N];((I==null?void 0:I.verdict)??H.FAILED)!==H.OK&&(p[N]=v)}}Reflect.set(k,"result",p)}return{standings:a.value.standings,firstBlood:m}});return(m,M)=>e(a).standings?(t(),r("div",je,[h(e(Y),{data:O.value.standings,mobile:1023},{columns:g(({row:i})=>[h(e(A),{label:"#",align:"center",width:"4em"},{default:g(()=>[d(i)?(t(),r("span",ze,"-")):(t(),r("span",Ke,c(i.rank),1))]),_:2},1024),h(e(A),{label:s.value?"Handle":""},{default:g(()=>[l("div",Je,[_(i)?(t(),y(e(ce),{key:0,class:"mr-1 text-sm text-yellow-300 inline-block"})):b("v-if",!0),l("div",null,[s.value?(t(),y($e,{key:0,author:i.author},null,8,["author"])):u.value?(t(),y(Be,{key:1,author:i.author},null,8,["author"])):$.value?(t(),y(Se,{key:2,author:i.author},null,8,["author"])):(t(),y(de,{key:3,author:i.author},null,8,["author"]))])])]),_:2},1032,["label"]),h(e(A),{label:"解决",align:"center",width:"4em"},{default:g(()=>[l("span",null,c(i.solved),1)]),_:2},1024),h(e(A),{label:"罚时",align:"center",width:"4em"},{default:g(()=>[d(i)?b("v-if",!0):(t(),r("span",We,c(e(Q)(i.penalty).value),1))]),_:2},1024),(t(!0),r(f,null,U(D.value,(k,p)=>{var v;return t(),y(e(A),{key:k.index,label:w(k.index),center:"",class:R(e(C)(i)&&e(C)(O.value.firstBlood[p])&&e(C)(i.result[p])&&i.result[p].verdict===e(H).OK&&i.result[p].relativeTime<=(((v=O.value.firstBlood[p])==null?void 0:v.relativeTime)??Number.MIN_SAFE_INTEGER)&&"bg-[#E0FFE4]")},{default:g(()=>[h(Pe,{result:i.result[p],practice:d(i)},null,8,["result","practice"])]),_:2},1032,["label","class"])}),128))]),_:1},8,["data"])])):b("v-if",!0)}}),Ge={class:"mb-4 flex items-center"},Qe={class:"info-box border-left"},Xe={key:0},Ye=["href"],Ze=["href"],ot=B({__name:"Contest",props:{contest:{},dynamic:{type:Boolean}},emits:["refresh"],setup(n,{emit:o}){const a=o;return(s,u)=>(t(),r("div",null,[l("h2",Ge,[l("span",null,c(s.contest.name),1),s.dynamic?(t(),y(e(ae),{key:0,class:"ml-4 h-8 w-8 p-1 border rounded-full cursor-pointer hover:bg-light-700",onClick:u[0]||(u[0]=$=>a("refresh"))})):b("v-if",!0)]),l("div",Qe,[l("p",null," 时间："+c(e(j)(s.contest.startTime).value)+" 至 "+c(e(j)(s.contest.startTime+s.contest.duration).value),1),l("p",null,"时长："+c(e(X)(s.contest.duration).value),1),l("p",null,"人数："+c(s.contest.participantNumber)+" 人",1),s.contest.contestUrl||s.contest.standingsUrl?(t(),r("p",Xe,[l("a",{href:s.contest.contestUrl,target:"_blank"},"比赛主页",8,Ye),l("a",{href:s.contest.standingsUrl,target:"_blank",class:"ml-2"},"完整榜单",8,Ze)])):b("v-if",!0)]),h(qe,{contest:s.contest},null,8,["contest"])]))}});export{ot as _,rt as f,W as h};
