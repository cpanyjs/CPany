import{d as j,s as z,v as L,b as M,x as U,o as D,e as x,g as o,w as n,h as e,f as m,t as u,j as i,k as A,i as G,y as c,z as H,A as I}from"./index-CjUs8Jv5.js";import{u as J}from"./users-BpOsUf0P.js";import{C as r,a as K}from"./c-table-D-f6IUEe.js";import{_ as P}from"./user-link-CK26Fvto.js";import"./load-Bav7-mWT.js";const Q={class:"divide-y"},W=m("h2",{class:"mb-4"},"成员",-1),X={class:"font-600"},Y={key:0},Z=m("div",{class:"my-4 px-3"},"人捏？",-1),tt={class:"mt-4 pt-4"},et={class:"text-gray-400"},lt=j({__name:"Members",setup(st){const b=z(),T=String(b.query.sort??"最近通过"),R=String(b.query.order??"desc"),d=L(M),O=t=>{const h=t.submissions.length,_=t.submissions.filter(({v:a})=>a!==0).length,s=(h!==0?(100*_/h).toFixed(1):"0.0")+" %",V=t.submissions.filter(({t:a})=>a>=d.value).length,q=t.submissions.filter(({t:a,v:f})=>a>=d.value&&f!==0).length,w=t.contests.filter(({t:a})=>a>=d.value).length,k=t.submissions.filter(({v:a})=>a===1).sort((a,f)=>f.t-a.t),$=k.length>0?k[0].t:0;return{subCount:h,okCount:_,okRate:s,recentSubCount:V,recentOkCount:q,recentContest:w,lastSolveTime:$,...t}},E=U(()=>J.map(O)),C=c(t=>t.recentOkCount),g=c(t=>t.recentContest),p=c(t=>t.lastSolveTime),B=c(t=>t.recentSubCount),S=c(t=>t.okCount),y=c(t=>t.contests.length),v=c(t=>t.subCount),F=c(t=>Number.parseFloat(t.okRate)),N=I(t=>t.name);function l(t){return H(t,C,g,p,B,S,y,v,F,N)}return(t,h)=>(D(),x("div",Q,[W,o(e(K),{data:e(E),cache:"members","default-sort":e(T),"default-sort-order":e(R)},{columns:n(({index:_,row:s})=>[o(e(r),{label:"#",width:"3em",align:"center"},{default:n(()=>[m("span",X,u(_+1),1)]),_:2},1024),o(e(r),{label:"姓名"},{default:n(()=>[o(P,{name:s.name},null,8,["name"])]),_:2},1024),o(e(r),{label:"最近通过",width:"7em",align:"right",sort:l(e(C))},{default:n(()=>[i(u(s.recentOkCount),1)]),_:2},1032,["sort"]),o(e(r),{label:"最近提交",width:"7em",align:"right",sort:l(e(B))},{default:n(()=>[i(u(s.recentSubCount),1)]),_:2},1032,["sort"]),o(e(r),{label:"最近比赛",width:"7em",align:"right",sort:l(e(g))},{default:n(()=>[i(u(s.recentContest),1)]),_:2},1032,["sort"]),o(e(r),{label:"最新通过",width:"10em",align:"center",sort:l(e(p))},{default:n(()=>[s.lastSolveTime>0?(D(),x("span",Y,u(e(A)(s.lastSolveTime).value),1)):G("v-if",!0)]),_:2},1032,["sort"]),o(e(r),{label:"通过",width:"5em",align:"right",sort:l(e(S))},{default:n(()=>[i(u(s.okCount),1)]),_:2},1032,["sort"]),o(e(r),{label:"提交",width:"5em",align:"right",sort:l(e(v))},{default:n(()=>[i(u(s.subCount),1)]),_:2},1032,["sort"]),o(e(r),{label:"通过率",width:"6em",align:"right",sort:l(e(F))},{default:n(()=>[i(u(s.okRate),1)]),_:2},1032,["sort"]),o(e(r),{label:"比赛",width:"5em",align:"right",sort:l(e(y))},{default:n(()=>[i(u(s.contests.length),1)]),_:2},1032,["sort"])]),empty:n(()=>[Z]),_:1},8,["data","default-sort","default-sort-order"]),m("div",tt,[m("span",et,"最近开始于 "+u(e(A)(d.value).value),1)])]))}});export{lt as default};
