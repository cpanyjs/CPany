import{d as A,s as E,v as L,x as M,e as T,f as d,g as o,w as n,h as e,t as r,b as U,o as R,j as m,k as O,i as G,y as u,z as H,A as I}from"./index-Cc-lLLcQ.js";import{u as J}from"./users-BpOsUf0P.js";import{C as l,a as K}from"./c-table-B5Gf5T_P.js";import{_ as P}from"./user-link.vue_vue_type_script_setup_true_lang-D-ZGsYJ_.js";import"./load-Bav7-mWT.js";const Q={class:"divide-y"},W={class:"font-600"},X={key:0},Y={class:"mt-4 pt-4"},Z={class:"text-gray-400"},rt=A({__name:"Members",setup(tt){const h=E(),N=String(h.query.sort??"最近通过"),V=String(h.query.order??"desc"),f=L(U),F=t=>{const c=t.submissions.length,b=t.submissions.filter(({v:a})=>a!==0).length,s=(c!==0?(100*b/c).toFixed(1):"0.0")+" %",D=t.submissions.filter(({t:a})=>a>=f.value).length,$=t.submissions.filter(({t:a,v:g})=>a>=f.value&&g!==0).length,j=t.contests.filter(({t:a})=>a>=f.value).length,x=t.submissions.filter(({v:a})=>a===1).sort((a,g)=>g.t-a.t),z=x.length>0?x[0].t:0;return{subCount:c,okCount:b,okRate:s,recentSubCount:D,recentOkCount:$,recentContest:j,lastSolveTime:z,...t}},q=M(()=>J.map(F)),_=u(t=>t.recentOkCount),C=u(t=>t.recentContest),p=u(t=>t.lastSolveTime),S=u(t=>t.recentSubCount),y=u(t=>t.okCount),v=u(t=>t.contests.length),k=u(t=>t.subCount),B=u(t=>Number.parseFloat(t.okRate)),w=I(t=>t.name);function i(t){return H(t,_,C,p,S,y,v,k,B,w)}return(t,c)=>(R(),T("div",Q,[c[1]||(c[1]=d("h2",{class:"mb-4"},"成员",-1)),o(e(K),{data:q.value,cache:"members","default-sort":e(N),"default-sort-order":e(V)},{columns:n(({index:b,row:s})=>[o(e(l),{label:"#",width:"3em",align:"center"},{default:n(()=>[d("span",W,r(b+1),1)]),_:2},1024),o(e(l),{label:"姓名"},{default:n(()=>[o(P,{name:s.name},null,8,["name"])]),_:2},1024),o(e(l),{label:"最近通过",width:"7em",align:"right",sort:i(e(_))},{default:n(()=>[m(r(s.recentOkCount),1)]),_:2},1032,["sort"]),o(e(l),{label:"最近提交",width:"7em",align:"right",sort:i(e(S))},{default:n(()=>[m(r(s.recentSubCount),1)]),_:2},1032,["sort"]),o(e(l),{label:"最近比赛",width:"7em",align:"right",sort:i(e(C))},{default:n(()=>[m(r(s.recentContest),1)]),_:2},1032,["sort"]),o(e(l),{label:"最新通过",width:"10em",align:"center",sort:i(e(p))},{default:n(()=>[s.lastSolveTime>0?(R(),T("span",X,r(e(O)(s.lastSolveTime).value),1)):G("v-if",!0)]),_:2},1032,["sort"]),o(e(l),{label:"通过",width:"5em",align:"right",sort:i(e(y))},{default:n(()=>[m(r(s.okCount),1)]),_:2},1032,["sort"]),o(e(l),{label:"提交",width:"5em",align:"right",sort:i(e(k))},{default:n(()=>[m(r(s.subCount),1)]),_:2},1032,["sort"]),o(e(l),{label:"通过率",width:"6em",align:"right",sort:i(e(B))},{default:n(()=>[m(r(s.okRate),1)]),_:2},1032,["sort"]),o(e(l),{label:"比赛",width:"5em",align:"right",sort:i(e(v))},{default:n(()=>[m(r(s.contests.length),1)]),_:2},1032,["sort"])]),empty:n(()=>c[0]||(c[0]=[d("div",{class:"my-4 px-3"},"人捏？",-1)])),_:1},8,["data","default-sort","default-sort-order"]),d("div",Y,[d("span",Z,"最近开始于 "+r(e(O)(f.value).value),1)])]))}});export{rt as default};
