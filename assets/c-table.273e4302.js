import{o as d,c as b,e as _,v as I,g as e,x as y,y as ke,d as J,z as K,A as i,f as $,w as P,h as G,B as V,F as L,C as O,j as B,t as j,i as R,_ as Pe,s as Se,D as $e,E as F}from"./index.a3efe635.js";const xe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Le=_("path",{fill:"currentColor",d:"M11 4h2v12l5.5-5.5l1.42 1.42L12 19.84l-7.92-7.92L5.5 10.5L11 16z"},null,-1),Me=[Le];function ze(c,a){return d(),b("svg",xe,[...Me])}var je={name:"mdi-arrow-down",render:ze};const Be={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ne=_("path",{fill:"currentColor",d:"M13 20h-2V8l-5.5 5.5l-1.42-1.42L12 4.16l7.92 7.92l-1.42 1.42L13 8z"},null,-1),Ae=[Ne];function De(c,a){return d(),b("svg",Be,[...Ae])}var Fe={name:"mdi-arrow-up",render:De};function Ve(c){const a=I(window.innerWidth),v=I(a.value<=e(c)),m=()=>{a.value=window.innerWidth,v.value=a.value<=e(c)},s=()=>window.removeEventListener("resize",m);return window.addEventListener("resize",m,{passive:!0}),{width:a,isMobile:v,clean:s}}const pe=new Map;function Te(c,a,v){var H;const m=y(()=>e(a).length),s=y(()=>{var M;return Math.max(1,(M=e(c))!=null?M:m.value)}),u=y(()=>Math.ceil(m.value/s.value)),o=I(v&&(H=pe.get(v))!=null?H:0),f=y(()=>o.value*s.value),C=y(()=>Math.min(m.value,f.value+s.value));ke(o,M=>{v&&pe.set(v,M)});const n=y(()=>o.value+1<u.value&&C.value<m.value),w=()=>{n.value&&(o.value+=1)},p=y(()=>o.value>0&&f.value>0);return{current:o,pageLength:u,L:f,R:C,hasNextPage:n,nextPage:w,hasPrePage:p,prePage:()=>{p.value&&(o.value-=1)},goPage:M=>{const A=e(M);0<=A&&A<u.value&&(o.value=A)}}}var Ee=J({name:"CTableColumn",props:{label:String,width:{type:[Number,String]},align:String,center:{type:Boolean,default:!1},sort:Function,mobileHeaderClass:{type:Array,default:[]}},setup(c,{slots:a}){const{align:v,center:m}=K(c),s=["px-3","py-2",v.value==="center"||m.value?"text-center":v.value==="right"?"text-right":"text-left"];return()=>i("td",{class:s},a.default&&a.default(c))}});const Ie={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},He=_("path",{fill:"currentColor",d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6z"},null,-1),Oe=[He];function Re(c,a){return d(),b("svg",Ie,[...Oe])}var ve={name:"mdi-chevron-left",render:Re};const Ue={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},We=_("path",{fill:"currentColor",d:"M8.59 16.58L13.17 12L8.59 7.41L10 6l6 6l-6 6z"},null,-1),qe=[We];function Ge(c,a){return d(),b("svg",Ue,[...qe])}var fe={name:"mdi-chevron-right",render:Ge};const Je={key:0,class:"mb-2 grid grid-cols-2 gap-2"},Ke={class:"flex justify-center"},Qe=_("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Xe=_("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Ye=_("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),Ze=_("span",{class:"select-none ml-2 inline-flex justify-center items-center py-2 md:px-2"},"...",-1),et=J({__name:"c-table-page",props:{isMobile:{type:Boolean},pageView:{},current:{},first:{},last:{},pageSize:{},nextPage:{type:Function},prePage:{type:Function},goPage:{type:Function}},setup(c){const a=c,{isMobile:v,pageView:m,current:s,first:u,last:o}=K(a),f=y(()=>{var n;return(n=m==null?void 0:m.value)!=null?n:5}),C=y(()=>{var n;return(n=v==null?void 0:v.value)!=null?n:!1});return(n,w)=>{const p=B("c-button");return d(),b(L,null,[C.value?(d(),b("div",Je,[$(p,{padding:"p-2",onClick:n.prePage,disable:e(s)<=e(u)},{default:P(()=>[$(e(ve))]),_:1},8,["onClick","disable"]),$(p,{padding:"p-2",onClick:n.nextPage,disable:e(s)+1>=e(o)},{default:P(()=>[$(e(fe))]),_:1},8,["onClick","disable"])])):G("v-if",!0),_("div",Ke,[C.value?G("v-if",!0):(d(),V(p,{key:0,padding:"p-2",onClick:n.prePage,disable:e(s)<=e(u)},{default:P(()=>[$(e(ve))]),_:1},8,["onClick","disable"])),e(o)-e(u)<=f.value?(d(!0),b(L,{key:1},O(e(o)-e(u),t=>(d(),V(p,{key:t,class:"ml-2",info:t+e(u)===e(s)+1,onClick:N=>n.goPage(t+e(u)-1)},{default:P(()=>[_("span",null,j(t+e(u)),1)]),_:2},1032,["info","onClick"]))),128)):e(s)-e(u)<f.value?(d(),b(L,{key:2},[(d(!0),b(L,null,O(f.value,t=>(d(),V(p,{key:t,class:"ml-2",info:t+e(u)===e(s)+1,onClick:N=>n.goPage(t+e(u)-1)},{default:P(()=>[_("span",null,j(t+e(u)),1)]),_:2},1032,["info","onClick"]))),128)),Qe,$(p,{class:"ml-2",onClick:w[0]||(w[0]=t=>n.goPage(e(o)-1))},{default:P(()=>[R(j(e(o)),1)]),_:1})],64)):e(o)-e(s)<=f.value?(d(),b(L,{key:3},[$(p,{class:"ml-2",onClick:w[1]||(w[1]=t=>n.goPage(e(u)))},{default:P(()=>[R(j(e(u)+1),1)]),_:1}),Xe,(d(!0),b(L,null,O(f.value,t=>(d(),V(p,{key:t,class:"ml-2",info:e(o)-f.value+t===e(s)+1,onClick:N=>n.goPage(e(o)-f.value+t-1)},{default:P(()=>[_("span",null,j(e(o)-f.value+t),1)]),_:2},1032,["info","onClick"]))),128))],64)):(d(),b(L,{key:4},[$(p,{class:"ml-2",onClick:w[2]||(w[2]=t=>n.goPage(e(u)))},{default:P(()=>[R(j(e(u)+1),1)]),_:1}),Ye,(d(!0),b(L,null,O(f.value,t=>(d(),V(p,{key:t,class:"ml-2",info:e(s)-Math.floor(f.value/2)+t===e(s)+1,onClick:N=>n.goPage(e(s)-Math.floor(f.value/2)+t-1)},{default:P(()=>[_("span",null,j(e(s)-Math.floor(f.value/2)+t),1)]),_:2},1032,["info","onClick"]))),128)),Ze,$(p,{class:"ml-2",onClick:w[3]||(w[3]=t=>n.goPage(e(o)-1))},{default:P(()=>[R(j(e(o)),1)]),_:1})],64)),C.value?G("v-if",!0):(d(),V(p,{key:5,padding:"p-2",class:"ml-2",onClick:n.nextPage,disable:e(s)+1>=e(o)},{default:P(()=>[$(e(fe))]),_:1},8,["onClick","disable"]))])],64)}}}),tt={},at={class:"select relative"},nt={class:"pl-2 pr-8 py-2 cursor-pointer block w-full outline-none rounded border border-1 border-[#dbdbdb] appearance-none"};function lt(c,a){return d(),b("div",at,[_("select",nt,[Se(c.$slots,"default")])])}var st=Pe(tt,[["render",lt]]);const ge=new Map;var rt=J({name:"CTable",components:{IconDown:je,IconUp:Fe,CTablePage:et,CSelect:st},props:{cache:{type:String},data:{type:Array,default:[]},mobile:{type:Number,default:768},defaultSort:{type:String},defaultSortOrder:{type:String,default:"asc"},pageSize:{type:Number},mobilePageSize:{type:Number}},setup(c,{slots:a}){var ee,te;const{data:v,defaultSort:m,defaultSortOrder:s,mobile:u,pageSize:o,mobilePageSize:f}=K(c),C=y(()=>v.value.length===0),{isMobile:n,clean:w}=Ve(u);$e(()=>w());const p=y(()=>{var k;return n.value&&(k=f.value)!=null?k:o.value}),t=c.cache?ge.get(c.cache):void 0,N=y(()=>F(p.value)),{current:H,pageLength:M,L:A,R:me,nextPage:he,prePage:be,goPage:ye}=Te(p,v,c.cache),T=I((ee=t==null?void 0:t.field)!=null?ee:m.value),z=I((te=t==null?void 0:t.order)!=null?te:s.value),U=()=>{c.cache&&ge.set(c.cache,{field:T.value,order:z.value})};U();const Q=k=>{T.value=k,z.value=s.value,U()},X=()=>{z.value==="desc"?z.value="asc":z.value="desc",U()},W=k=>{if(!k)return[];const S=[];for(const l of k)if(l.type===L&&Array.isArray(l.children))for(const r of l.children)r!==null&&typeof r=="object"&&!Array.isArray(r)&&S.push(r);else S.push(l);return S.filter(l=>l.type===Ee)},q=W(a.columns?a.columns({}):[]),_e=y(()=>(S=>{var l,r,g;if(F(T.value)){for(const h of q)if(((r=(l=h.props)==null?void 0:l.label)!=null?r:"")===T.value){const x=S.sort((g=h.props)==null?void 0:g.sort);return z.value==="desc"?x.reverse():x}return S}else return S})(v.value)),Y=y(()=>_e.value.slice(A.value,me.value)),Z=()=>i(B("c-table-page"),{current:H.value,first:0,last:M.value,pageSize:p.value,nextPage:he,prePage:be,goPage:ye,pageView:n.value?3:5,isMobile:n.value}),Ce=()=>{const k=()=>q.map(l=>{var E,ae,ne,le,se,oe,re,ie,ce;const r=F((E=l.props)==null?void 0:E.sort),g=r&&((ne=(ae=l.props)==null?void 0:ae.label)!=null?ne:"")===T.value,h={width:(le=l.props)==null?void 0:le.width,borderWidth:"0 0 2px 0"},D=((se=l.props)==null?void 0:se.align)==="center"||F((oe=l.props)==null?void 0:oe.center)&&((re=l.props)==null?void 0:re.center)!==!1?"justify-center":((ie=l.props)==null?void 0:ie.align)==="right"?"justify-end":"justify-start";return i("th",{style:h,class:["select-none","font-600","px-3","py-2","border-solid",g?"border-[#7a7a7a]":"border-[#dbdbdb]",r?"cursor-pointer":null,r?"hover:border-[#7a7a7a]":null]},i("div",{class:["flex","items-center",D],onClick:r?()=>{var ue,de;g?X():Q((de=(ue=l.props)==null?void 0:ue.label)!=null?de:"")}:void 0},[r?i(z.value==="desc"?B("icon-down"):B("icon-up"),{class:[!g&&"hidden"]}):"",i("span",{},(ce=l.props)==null?void 0:ce.label)]))}),S=l=>l.map((r,g)=>i("tr",{},a.columns&&W(a.columns({row:r,index:g+A.value}))));return i("div",{},[i("table",{class:["table","w-full","border-separate","table-auto","rounded"]},[i("thead",{},i("tr",{},k())),i("tbody",{},S(Y.value))]),!C.value&&N.value&&Z(),C.value&&a.empty&&a.empty({})])},we=()=>{const k=()=>{const l=q.map(r=>{var g,h,D;if(F((g=r.props)==null?void 0:g.sort)){const x=(D=(h=r.props)==null?void 0:h.label)!=null?D:"";return i("option",{value:x},[x])}else return null}).filter(r=>F(r));return l.length>0&&i("div",{class:["my-4","flex","justify-between"]},[i(B("c-select"),{class:["w-full","mr-2"],onChange(r){var h;const g=(h=r.target)==null?void 0:h.value;F(g)&&Q(g)}},l),i(B("c-button"),{info:!0,onClick:X},[z.value==="desc"?i(B("icon-down"),{}):i(B("icon-up"),{})])])},S=()=>Y.value.map((l,r)=>{const g=W(a.columns&&a.columns({row:l,index:r+A.value,mobile:!0}));return i("div",{class:["box","p-0","my-4"]},g.map(h=>{var x,E;const D=(x=h.props&&h.props["mobile-header-class"])!=null?x:[];return i("div",{class:["pl-3","border","flex","flex-shrink","justify-between","justify-items-stretch"]},[i("div",{class:["py-2","font-600","text-left","flex","items-center",...D]},(E=h.props)==null?void 0:E.label),i(h,{class:["block"]})])}))});return i("div",{class:["mobile-table"]},[!C.value&&k(),S(),!C.value&&N.value&&Z(),C.value&&a.empty&&a.empty({})])};return()=>n.value?we():Ce()}});export{Ee as C,rt as a,st as b};
