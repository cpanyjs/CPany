import{d as I,v as J,x as L,c as T,f as o,w as n,g as e,e as m,t as u,G as M,b as U,o as A,i,k as R,h as j,H as c,I as z,J as K}from"./index.1b214c73.js";import{u as P}from"./users.07482805.js";import{C as r,a as Q}from"./c-table.ac37fcf4.js";import{_ as W}from"./user-link.5c83b2fe.js";import"./load.be0a3c09.js";const X={class:"divide-y"},Y=m("h2",{class:"mb-4"},"\u6210\u5458",-1),Z={class:"font-600"},tt={key:0},et=m("div",{class:"my-4 px-3"},"\u4EBA\u634F\uFF1F",-1),st={class:"mt-4 pt-4"},ot={class:"text-gray-400"},it=I({__name:"Members",setup(nt){var k,D;const b=M(),O=String((k=b.query.sort)!=null?k:"\u6700\u8FD1\u901A\u8FC7"),E=String((D=b.query.order)!=null?D:"desc"),d=J(U),N=t=>{const h=t.submissions.length,_=t.submissions.filter(({v:a})=>a!==0).length,s=(h!==0?(100*_/h).toFixed(1):"0.0")+" %",w=t.submissions.filter(({t:a})=>a>=d.value).length,$=t.submissions.filter(({t:a,v:f})=>a>=d.value&&f!==0).length,G=t.contests.filter(({t:a})=>a>=d.value).length,x=t.submissions.filter(({v:a})=>a===1).sort((a,f)=>f.t-a.t),H=x.length>0?x[0].t:0;return{subCount:h,okCount:_,okRate:s,recentSubCount:w,recentOkCount:$,recentContest:G,lastSolveTime:H,...t}},V=L(()=>P.map(N)),C=c(t=>t.recentOkCount),g=c(t=>t.recentContest),p=c(t=>t.lastSolveTime),B=c(t=>t.recentSubCount),S=c(t=>t.okCount),y=c(t=>t.contests.length),v=c(t=>t.subCount),F=c(t=>Number.parseFloat(t.okRate)),q=K(t=>t.name);function l(t){return z(t,C,g,p,B,S,y,v,F,q)}return(t,h)=>(A(),T("div",X,[Y,o(e(Q),{data:V.value,cache:"members","default-sort":e(O),"default-sort-order":e(E)},{columns:n(({index:_,row:s})=>[o(e(r),{label:"#",width:"3em",align:"center"},{default:n(()=>[m("span",Z,u(_+1),1)]),_:2},1024),o(e(r),{label:"\u59D3\u540D"},{default:n(()=>[o(W,{name:s.name},null,8,["name"])]),_:2},1024),o(e(r),{label:"\u6700\u8FD1\u901A\u8FC7",width:"7em",align:"right",sort:l(e(C))},{default:n(()=>[i(u(s.recentOkCount),1)]),_:2},1032,["sort"]),o(e(r),{label:"\u6700\u8FD1\u63D0\u4EA4",width:"7em",align:"right",sort:l(e(B))},{default:n(()=>[i(u(s.recentSubCount),1)]),_:2},1032,["sort"]),o(e(r),{label:"\u6700\u8FD1\u6BD4\u8D5B",width:"7em",align:"right",sort:l(e(g))},{default:n(()=>[i(u(s.recentContest),1)]),_:2},1032,["sort"]),o(e(r),{label:"\u6700\u65B0\u901A\u8FC7",width:"10em",align:"center",sort:l(e(p))},{default:n(()=>[s.lastSolveTime>0?(A(),T("span",tt,u(e(R)(s.lastSolveTime).value),1)):j("v-if",!0)]),_:2},1032,["sort"]),o(e(r),{label:"\u901A\u8FC7",width:"5em",align:"right",sort:l(e(S))},{default:n(()=>[i(u(s.okCount),1)]),_:2},1032,["sort"]),o(e(r),{label:"\u63D0\u4EA4",width:"5em",align:"right",sort:l(e(v))},{default:n(()=>[i(u(s.subCount),1)]),_:2},1032,["sort"]),o(e(r),{label:"\u901A\u8FC7\u7387",width:"6em",align:"right",sort:l(e(F))},{default:n(()=>[i(u(s.okRate),1)]),_:2},1032,["sort"]),o(e(r),{label:"\u6BD4\u8D5B",width:"5em",align:"right",sort:l(e(y))},{default:n(()=>[i(u(s.contests.length),1)]),_:2},1032,["sort"])]),empty:n(()=>[et]),_:1},8,["data","default-sort","default-sort-order"]),m("div",st,[m("span",ot,"\u6700\u8FD1\u5F00\u59CB\u4E8E "+u(e(R)(d.value).value),1)])]))}});export{it as default};
